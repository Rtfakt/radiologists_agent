# Конструктор рентгеновских заключений

Приложение для работы с рентгеновскими заключениями с поддержкой плагинов для разных модальностей.

## Структура проекта

```
radiologists_agent/
├── core/                      # Ядро (чистый Python, без UI зависимостей)
│   ├── __init__.py
│   └── plugin_base.py        # Базовые классы плагинов
├── plugins/                   # Плагины (поддиректории)
│   ├── mammography/          # Плагин маммографии
│   │   ├── __init__.py
│   │   └── plugin.py
│   └── densitometry/         # Плагин денситометрии
│       ├── __init__.py
│       └── plugin.py
├── ui/                        # Пользовательский интерфейс
│   ├── __init__.py
│   └── main_window.py        # Главное окно
├── main.py                    # Точка входа
└── README.md
```

## Архитектура

Проект использует **плагин-систему**:

- **core/** - ядро без зависимостей от UI, только абстрактные классы
- **plugins/** - плагины модальностей, каждый в отдельной папке
- **ui/** - пользовательский интерфейс на PySide6
- **main.py** - динамическая загрузка плагинов при запуске

## Установка зависимостей

```bash
pip install PySide6
```

## Запуск

```bash
python main.py
```

или

```bash
python3 main.py
```

## Использование

1. При запуске приложение автоматически сканирует папку `plugins/` и загружает все найденные плагины
2. В левой панели отображается список доступных модальностей
3. При клике на модальность в правой панели отображается соответствующий виджет плагина
4. Каждый плагин имеет свои кнопки и поля для работы

## Плагины

### Маммография
- Кнопки для выбора плотности молочной железы: A, B, C, D (ACR)
- Кнопки для выбора заключения: Норма, ФЖИ, ФКМ?
- Кнопка для формирования текста заключения

### Денситометрия
- Поля для позвоночника (L1-L4): T-критерий, Z-критерий, костная масса
- Поля для шейки бедренной кости: T-критерий, Z-критерий, костная масса
- Кнопка для формирования текста заключения

## Добавление нового плагина

1. Создайте новую папку в `plugins/` (например, `plugins/my_modality/`)
2. Создайте файл `plugin.py` с классом `Plugin`, наследующимся от `ModalityPlugin`
3. Реализуйте методы:
   - `get_name() -> str` - название модальности
   - `get_description() -> str` - описание
   - `create_widget() -> QWidget` - создание виджета
4. При следующем запуске плагин будет автоматически загружен

## Пример структуры плагина

```python
from PySide6.QtWidgets import QWidget
from core.plugin_base import ModalityPlugin

class MyModalityPlugin(ModalityPlugin):
    def get_name(self) -> str:
        return "Моя модальность"
    
    def get_description(self) -> str:
        return "Описание"
    
    def create_widget(self) -> QWidget:
        widget = QWidget()
        # ... настройка виджета
        return widget

Plugin = MyModalityPlugin
```
